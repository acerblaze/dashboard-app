<div class="metric-widget">
  <!-- Header with title -->
  <div class="widget-header">
    <h3>{{ metricLabel }}</h3>
    <button mat-icon-button [matMenuTriggerFor]="menu" class="more-options">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu" xPosition="before">
      <button mat-menu-item [routerLink]="['/metric', metricType]">
        <mat-icon>analytics</mat-icon>
        <span>Details</span>
      </button>
      <button mat-menu-item (click)="toggleSize()">
        <mat-icon>open_in_full</mat-icon>
        <span>Expand Widget</span>
      </button>
      <button mat-menu-item (click)="toggleMetricType()">
        <mat-icon>{{ metricType === 'users' ? 'visibility' : 'group' }}</mat-icon>
        <span>Show {{ metricType === 'users' ? 'Page Views' : 'Users' }}</span>
      </button>
    </mat-menu>
  </div>

  <!-- Current value -->
  <div class="metric-value">
    <div class="current-value">
      {{ formatNumber(displayValue) }} <span class="today-label">Today</span>
    </div>
  </div>

  <!-- Sparkline chart -->
  <div class="sparkline-section">
    <div class="sparkline-header">Last 7 days</div>
    <div class="sparkline-container">
      <canvas #sparklineChart></canvas>
    </div>
  </div>
</div>
