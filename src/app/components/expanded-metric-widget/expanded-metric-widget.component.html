<div class="expanded-metric-widget">
  <!-- Header with title and controls -->
  <div class="widget-header">
    <h3>{{ metricLabel }}</h3>
    <div class="widget-controls">
      <button mat-icon-button [matMenuTriggerFor]="menu" class="more-options">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu" xPosition="before">
        <button mat-menu-item [routerLink]="['/metric', metricType]">
          <mat-icon>analytics</mat-icon>
          <span>Details</span>
        </button>
        <button mat-menu-item (click)="toggleSize()">
          <mat-icon>close_fullscreen</mat-icon>
          <span>Collapse Widget</span>
        </button>
        <button mat-menu-item (click)="toggleMetricType()">
          <mat-icon>{{ metricType === 'users' ? 'visibility' : 'group' }}</mat-icon>
          <span>Show {{ metricType === 'users' ? 'Page Views' : 'Users' }}</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <!-- Progress indicator -->
  <div class="progress-container">
    <div class="progress-bar" [style.width.%]="progressPercentage">
      <div class="progress-label">
        {{ progressPercentage | number:'1.0-0' }}%
      </div>
    </div>
  </div>

  <!-- Metric values -->
  <div class="metric-values">
    <div class="current-value">
      <span class="label">Today's Value:</span>
      <span class="value">{{ formatNumber(displayValue) }}</span>
    </div>
    <div class="cumulative-value">
      <span class="label">Total So Far:</span>
      <span class="value">{{ formatNumber(displayCumulativeValue) }}</span>
    </div>
    <div class="target-value">
      <span class="label">Monthly Target:</span>
      <span class="value">{{ formatNumber(getMonthlyTarget()) }}</span>
    </div>
  </div>

  <!-- Target status -->
  <div class="target-status" [class.reached]="isTargetReached">
    {{ isTargetReached ? 'Target Reached! ðŸŽ‰' : 'Target Not Yet Reached' }}
  </div>
</div>
